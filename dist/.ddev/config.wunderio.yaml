hooks:
  post-import-db:
    - exec: "$DDEV_APPROOT/.ddev/wunderio/core/_run-scripts.sh hooks-db-post-import.sh"
  post-restore-snapshot:
    - exec: "$DDEV_APPROOT/.ddev/wunderio/core/_run-scripts.sh hooks-db-post-import.sh"
  post-start:
    # Check for the env variables to be present.
    - exec: 'if [ -z "${DDEV_APPROOT+x}" ]; then echo -e "\e[1;31mError: Your DDEV version is too old and is missing DDEV_APPROOT. Please update DDEV. See upgrading guide https://docs.ddev.com/en/stable/users/install/ddev-upgrade/\e[0m"; fi'
    # Build hook workaround to run composer install on first start.
    # @todo We could potentially make this more like lando build hook by creating tmp files.
    - exec: "[ ! -d \"$DDEV_COMPOSER_ROOT/vendor\" ] && $DDEV_APPROOT/.ddev/wunderio/core/_run-scripts.sh hooks-web-post-start-once.sh || true"
    # Script to run on every start on the host.
    - exec-host: ".ddev/wunderio/core/_run-scripts.sh hooks-host-post-start.sh"
    # Script to run on every start.
    - exec: "$DDEV_APPROOT/.ddev/wunderio/core/_run-scripts.sh hooks-web-post-start.sh"
    # Wunderio/ddev-drupal update check.
    - exec: "UPDATE_SCRIPT=\"$DDEV_COMPOSER_ROOT/vendor/wunderio/ddev-drupal/scripts/update_check.sh\"; [ -f \"$UPDATE_SCRIPT\" ] && $UPDATE_SCRIPT || true"
web_environment:
# Both this project and wunderio/lando-drupal use the same file
# at drush/sites/local.site.yml. To make sure that the local alias
# is working, we need to set the same environment variables here.
- LANDO_WEBROOT=$DDEV_COMPOSER_ROOT/$DDEV_DOCROOT
# When Mutagen is enabled (which it is by default in DDEV v1.19+),
# these directories are bind-mounted directly rather than synced via Mutagen
# This improves performance for large file directories by bypassing Mutagen's
# syncing.
# The paths are relative to the project root.
upload_dirs:
  # Configure database_dumps directory to be bind-mounted directly
  # instead of being synced via Mutagen for better performance
  - ../database_dumps
